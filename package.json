{
  "name": "statements-ai-monorepo",
  "version": "1.0.0",
  "private": true,
  "description": "Bank Statements AI - Monorepo",
  "scripts": {
    "========== DEVELOPMENT ==========": "",
    "dev": "pnpm run dev:api & pnpm run dev:web",
    "dev:api": "cd bank-statements-api && DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:54321/bank_statements uv run python run.py",
    "dev:web": "cd bank-statements-web && pnpm run dev",
    "start": "pnpm run db:start && pnpm run dev",
    "stop": "(lsof -ti :8000 | xargs kill -9; lsof -ti :5173 | xargs kill -9) 2>/dev/null || true",

    "========== DATABASE ==========": "",
    "db:up": "docker-compose up db -d",
    "db:down": "docker-compose down",
    "db:start": "pnpm db:up && sleep 3 && pnpm db:migrate",
    "db:destroy": "docker-compose down -v",
    "db:migrate": "cd bank-statements-api && DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:54321/bank_statements uv run alembic upgrade head",
    "db:rollback": "cd bank-statements-api && DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:54321/bank_statements uv run alembic downgrade -1",
    "db:backup": "mkdir -p backups && docker exec bank-statements-db pg_dump -U postgres -d bank_statements -F c > backups/bank_statements_$(date +%Y%m%d_%H%M%S).dump && echo 'Backup created in backups/ directory'",
    "db:restore": "test -n \"$FILE\" || (echo 'Usage: FILE=backups/your_backup.dump pnpm db:restore' && exit 1) && docker exec -i bank-statements-db pg_restore -U postgres -d bank_statements -c < \"$FILE\"",
    "db:sync:from-neon": "./scripts/db-sync.sh neon-to-local",
    "db:sync:to-neon": "./scripts/db-sync.sh local-to-neon",

    "========== TESTING ==========": "",
    "test:db:up": "docker-compose --profile test up test-db -d",
    "test:db:down": "docker-compose stop test-db && docker-compose rm -f test-db",
    "test:db:migrate": "cd bank-statements-api && DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:15432/bank_statements_test uv run alembic upgrade head",
    "test": "pnpm run test:unit && pnpm run test:integration && pnpm run test:web",
    "test:unit": "cd bank-statements-api && uv run pytest tests/unit tests/api tests/services -v",
    "test:integration": "./scripts/run-integration.sh",
    "test:api": "cd bank-statements-api && uv run pytest tests/unit tests/api tests/services && pnpm run test:integration",
    "test:api:cov": "cd bank-statements-api && uv run pytest tests/unit tests/api tests/services --cov",
    "test:web": "cd bank-statements-web && pnpm vitest run",
    "test:web:watch": "cd bank-statements-web && pnpm run test",
    "test:web:ui": "cd bank-statements-web && pnpm vitest --ui",
    "test:e2e": "./scripts/run-e2e.sh",
    "test:e2e:ui": "./scripts/run-e2e.sh --ui",
    "test:e2e:docker": "./scripts/run-e2e-docker.sh",

    "========== LINTING & FORMATTING ==========": "",
    "lint": "pnpm run lint:api && pnpm run lint:web",
    "lint:fix": "pnpm run lint:api:fix && pnpm run lint:web:fix",
    "lint:api": "cd bank-statements-api && uv run ruff check .",
    "lint:api:fix": "cd bank-statements-api && uv run ruff check . --fix",
    "lint:web": "cd bank-statements-web && pnpm run lint",
    "lint:web:fix": "cd bank-statements-web && pnpm run lint:fix",
    "format": "pnpm run format:api && pnpm run format:web",
    "format:api": "cd bank-statements-api && uv run black . && uv run isort .",
    "format:web": "cd bank-statements-web && pnpm run format",
    "check": "pnpm run check:api && pnpm run check:web",
    "check:api": "cd bank-statements-api && uv run isort . --check-only && uv run black . --check && uv run ruff check .",
    "check:web": "cd bank-statements-web && pnpm exec tsc --noEmit",
    "verify": "pnpm run verify:api && pnpm run verify:web",
    "verify:api": "pnpm run format:api && pnpm run lint:api && pnpm run test:api",
    "verify:web": "pnpm run format:web && pnpm run lint:web && pnpm run check:web && pnpm run test:web",

    "========== BUILD ==========": "",
    "build": "pnpm run build:web",
    "build:web": "cd bank-statements-web && pnpm run build",

    "========== DOCKER ==========": "",
    "docker:up": "docker-compose up",
    "docker:down": "docker-compose down",
    "docker:build": "docker-compose build",

    "========== INSTALL ==========": "",
    "install": "pnpm install:web && pnpm install:e2e && pnpm install:api",
    "install:web": "cd bank-statements-web && pnpm install",
    "install:e2e": "cd e2e/bank-statements-web && pnpm install",
    "install:api": "cd bank-statements-api && uv sync",

    "========== DEPLOY ==========": "",
    "deploy:api:build": "cd bank-statements-api && pip install uv && uv sync",
    "deploy:api:start": "cd bank-statements-api && uv run alembic upgrade head && uv run uvicorn app.main:app --host 0.0.0.0 --port $PORT",
    "deploy:web:build": "cd bank-statements-web && pnpm install --frozen-lockfile && pnpm run build",
    "deploy:setup": "pnpm deploy:setup:github && pnpm deploy:setup:render",
    "deploy:setup:github": "cd bank-statements-api && uv run python ../scripts/setup-github-secrets.py",
    "deploy:setup:render": "cd bank-statements-api && uv run python ../scripts/setup-render-env.py",

    "========== UTILITY ==========": "",
    "config:generate": "uvx --from pyyaml python scripts/generate_env_files.py",
    "clean": "pnpm run clean:web && pnpm run clean:api",
    "clean:web": "cd bank-statements-web && rm -rf node_modules dist",
    "clean:api": "cd bank-statements-api && rm -rf __pycache__ .pytest_cache .coverage",
    "reset": "pnpm run clean && pnpm run install"
  },
  "devDependencies": {},
  "engines": {
    "node": ">=18.0.0",
    "pnpm": ">=8.0.0"
  }
}
